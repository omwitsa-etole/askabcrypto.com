<h2 style="margin-left: 10%;">Pair: {{ pir }};	Percentage Difference(%)</h2><br>
<table border="1px" style="border-collapse: collapse;" id="f-table">
<tr>
{% for i in range(0, m)%}
	{% if i == 0 %}
		<th></th>
	{%endif%}
	<th>{{ source[i-1] }}</th>
{% endfor %}
</tr>
{%for j in range(0, n)%}
	<tr>
	{% for i in range(0, m) %}
		{%if i == 0%}
			<td>{{s[i]}}({{source[j-1]}})</td>
		{%endif%}
		{% if p1[j] == "Undefined" or p2[i] == "Undefined" %}
			<td style="background-color: #FF4500;">No data</td>
		{% else %}
			<td>{{((p2[i-1]/p1[j-1])*100)-100}}</td>
		{%endif%}
	{% endfor %}
	</tr>
{%endfor%}
</table><br><br>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
   }
$(document).ready(function() {
	sleep(1000).then(() => {
		const table = document.getElementById('f-table');
		const cells = table.getElementsByTagName('td');
		let txt = ""
		for (const cell of cells) {
			txt = cell.innerText;
			//console.log(text)
			if(txt != "Undefined" && txt != "No data"){
				txt =  parseFloat(txt);
				if(txt > 10){
					cell.setAttribute("style", "background-color:green;"); 
					$(this).text(txt.toFixed(2));
				}else if(txt >= 5 && txt <= 10){
					cell.setAttribute("style", "background-color: #6B8E23;");
					$(this).text(txt.toFixed(2));
				}else if(txt >= 1 && txt <= 4){
					cell.setAttribute("style", "background-color:#7CFC00;"); 
					$(this).text(txt.toFixed(2));
				}else if(txt < 1){
					cell.setAttribute("style", "background-color:#98FB98;"); 
					$(this).text(txt.toFixed(2));
				}
							
			}
		}
	})
});
</script>